<header id="header">
  <p class="heading__large">{{ titulo }}</p>

  <div id="actions">
    <button id="newline-btn" (click)="onNuevaLineaClick()">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.8125 9H15.1875" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M9 2.8125V15.1875" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <span class="body__large">Nueva línea</span>
    </button>

    <div class="vertical-divider"></div>

    <div id="profile-trigger" class="profile-button" *ngIf="isAuthenticated && !esInvitado">
      <img class="avatar" [src]="usuarioActual?.fotoPerfil || '../../../../assets/img/profile3.jpg'" alt="">
    </div>

    <button id="register-btn" *ngIf="!isAuthenticated || esInvitado" routerLink="/registro">
      <span class="body__large">Registrarse</span>
    </button>
  </div>

  <div id="modal-backdrop"></div>
  <section id="settings-modal" role="dialog" aria-labelledby="settings-modal-title" aria-modal="true" data-type="modal">
    <section class="sentting-modal-header">
      <p>Configuración</p>
      <button id="settings-modal-close" type="button" aria-label="Cerrar configuración" data-close>
        <span aria-hidden="true">×</span>
      </button>
    </section>
  </section>

  <div id="profile-menu" *ngIf="isAuthenticated && !esInvitado">
    <div class="profile-menu__header">

      <div class="profile-menu_wrap">
        <img class="avatar" [src]="usuarioActual?.fotoPerfil || '../../../../assets/img/profile3.jpg'" alt="">
      </div>

      <div class="profile-info" *ngIf="usuarioActual">
        <p class="body__large">{{ usuarioActual.nombre }}</p>
        <p class="body__medium">{{ usuarioActual.email }}</p>
      </div>
    </div>

    <div class="nav-divider"></div>

    <div class="profile-menu__list">
      
        <li class="">
          <u>
          <a routerLink="/dashboard/ajustes">
          <svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 18 18" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.99998 5.02009C8.19649 5.02009 7.41105 5.25835 6.74298 5.70474C6.0749 6.15114 5.5542 6.78561 5.24672 7.52794C4.93924 8.27026 4.85879 9.0871 5.01554 9.87514C5.17229 10.6632 5.55921 11.3871 6.12736 11.9552C6.69551 12.5234 7.41938 12.9103 8.20743 13.067C8.99547 13.2238 9.81231 13.1433 10.5546 12.8359C11.297 12.5284 11.9314 12.0077 12.3778 11.3396C12.8242 10.6715 13.0625 9.88608 13.0625 9.08259C13.0612 8.00553 12.6328 6.97294 11.8712 6.21134C11.1096 5.44974 10.077 5.02133 8.99998 5.02009ZM8.99998 11.2701C8.56733 11.2701 8.1444 11.1418 7.78467 10.9014C7.42494 10.6611 7.14456 10.3194 6.97899 9.91971C6.81343 9.52 6.77011 9.08016 6.85451 8.65583C6.93892 8.2315 7.14726 7.84172 7.45319 7.53579C7.75911 7.22987 8.14889 7.02153 8.57322 6.93712C8.99755 6.85272 9.43739 6.89604 9.8371 7.0616C10.2368 7.22717 10.5785 7.50755 10.8188 7.86728C11.0592 8.22701 11.1875 8.64994 11.1875 9.08259C11.1875 9.66275 10.957 10.2192 10.5468 10.6294C10.1365 11.0396 9.58014 11.2701 8.99998 11.2701ZM16.1875 9.14431V9.02087L17.2812 7.6529C17.373 7.53828 17.4366 7.40369 17.4669 7.25999C17.4972 7.11628 17.4932 6.96747 17.4555 6.82556C17.2581 6.08111 16.9631 5.36605 16.5781 4.699C16.5039 4.57179 16.4009 4.46385 16.2772 4.3839C16.1536 4.30396 16.0128 4.25426 15.8664 4.23884L14.1258 4.04353L14.039 3.95681L13.8437 2.2154C13.8282 2.06911 13.7784 1.92852 13.6985 1.80502C13.6186 1.68151 13.5107 1.57855 13.3836 1.50447C12.7165 1.11829 12.0011 0.822218 11.2562 0.623997C11.1142 0.586761 10.9654 0.583411 10.8218 0.614214C10.6783 0.645018 10.5439 0.709115 10.4297 0.801341L9.0617 1.89509H8.93826L7.57029 0.801341C7.45567 0.709529 7.32108 0.64593 7.17738 0.615669C7.03367 0.585407 6.88486 0.589331 6.74295 0.627122C5.99831 0.825725 5.28324 1.12205 4.61639 1.50837C4.48968 1.58215 4.38204 1.68462 4.30213 1.80755C4.22221 1.93048 4.17224 2.07044 4.15623 2.21618L3.96092 3.95681L3.8742 4.04353L2.13279 4.23884C1.9865 4.25438 1.84591 4.30413 1.72241 4.38407C1.5989 4.46401 1.49594 4.57189 1.42186 4.699C1.03676 5.36626 0.741746 6.0816 0.544512 6.82634C0.506849 6.96814 0.502992 7.1168 0.533251 7.26035C0.56351 7.40391 0.62704 7.53837 0.71873 7.6529L1.81248 9.02087V9.14431L0.71873 10.5123C0.626919 10.6269 0.563319 10.7615 0.533058 10.9052C0.502797 11.0489 0.506720 11.1977 0.544512 11.3396C0.743361 12.0843 1.03995 12.7994 1.42654 13.4662C1.50024 13.5928 1.60259 13.7004 1.72538 13.7803C1.84816 13.8602 1.98797 13.9102 2.13357 13.9263L3.8742 14.1201L3.96092 14.2068L4.15623 15.9498C4.17177 16.0961 4.22152 16.2367 4.30146 16.3602C4.3814 16.4837 4.48928 16.5866 4.61639 16.6607C5.28349 17.0469 5.99883 17.343 6.74373 17.5412C6.88577 17.5784 7.03457 17.5818 7.17814 17.551C7.32171 17.5202 7.45603 17.4561 7.57029 17.3638L8.93826 16.2701H9.0617L10.4297 17.3638C10.5443 17.4557 10.6789 17.5193 10.8226 17.5495C10.9663 17.5798 11.1151 17.5758 11.257 17.5381C12.0015 17.3407 12.7165 17.0457 13.3836 16.6607C13.5106 16.5871 13.6185 16.4847 13.6987 16.3618C13.7789 16.2388 13.8291 16.0988 13.8453 15.9529L14.039 14.2123L14.1258 14.1256L15.8672 13.9263C16.0131 13.9102 16.1531 13.86 16.2761 13.7798C16.399 13.6996 16.5014 13.5916 16.575 13.4646C16.9612 12.7975 17.2572 12.0822 17.4555 11.3373C17.4929 11.1957 17.4966 11.0474 17.4663 10.9041C17.4361 10.7608 17.3727 10.6266 17.2812 10.5123L16.1875 9.14431ZM14.3031 8.76228C14.3156 8.97564 14.3156 9.18954 14.3031 9.4029C14.2891 9.63484 14.3618 9.86369 14.507 10.0451L15.5101 11.299C15.4154 11.5793 15.3024 11.8531 15.1719 12.1185L13.5758 12.2959C13.3447 12.3223 13.1317 12.4337 12.9781 12.6084C12.8362 12.7683 12.6849 12.9196 12.525 13.0615C12.3503 13.2151 12.2389 13.4281 12.2125 13.6592L12.0359 15.2545C11.7705 15.3856 11.4967 15.4991 11.2164 15.5943L9.96248 14.5904C9.79607 14.4576 9.58943 14.3854 9.37654 14.3857C9.35779 14.3857 9.33904 14.3857 9.32029 14.3857C9.10694 14.3982 8.89303 14.3982 8.67967 14.3857C8.44789 14.372 8.21920 14.4443 8.03748 14.5888L6.78357 15.5927C6.50328 15.4981 6.22952 15.3850 5.96404 15.2545L5.7867 13.6584C5.76028 13.4273 5.64890 13.2143 5.47420 13.0607C5.31431 12.9188 5.16300 12.7675 5.02107 12.6076C4.86752 12.4329 4.65450 12.3215 4.42342 12.2951L2.82811 12.1185C2.69699 11.8531 2.58346 11.5793 2.48826 11.299L3.49139 10.0451C3.63659 9.86369 3.70925 9.63484 3.69529 9.4029C3.68279 9.18954 3.68279 8.97564 3.69529 8.76228C3.70925 8.53034 3.63659 8.30149 3.49139 8.12009L2.48982 6.86618C2.58452 6.58589 2.69752 6.31213 2.82811 6.04665L4.42420 5.86931C4.65529 5.84289 4.86830 5.73151 5.02186 5.55681C5.16378 5.39692 5.31509 5.24561 5.47498 5.10368C5.64968 4.95013 5.76106 4.73711 5.78748 4.50603L5.96404 2.91072C6.22948 2.77960 6.50325 2.66607 6.78357 2.57087L8.03748 3.57478C8.21920 3.71930 8.44789 3.79164 8.67967 3.77790C8.89303 3.76540 9.10694 3.76540 9.32029 3.77790C9.55213 3.79208 9.78097 3.71970 9.96248 3.57478L11.2164 2.57087C11.4967 2.66607 11.7705 2.77960 12.0359 2.91072L12.2133 4.50681C12.2397 4.73790 12.3511 4.95091 12.5258 5.10447C12.6857 5.24639 12.8370 5.39770 12.9789 5.55759C13.1324 5.73229 13.3455 5.84367 13.5765 5.87009L15.1719 6.04665C15.3030 6.31209 15.4165 6.58586 15.5117 6.86618L14.5086 8.12009C14.3628 8.30126 14.2896 8.53014 14.3031 8.76228Z" />
          </svg>
          <span class="body__large">Ajustes</span>
          </a>
          </u>
        </li>
      
    </div>

    <div class="nav-divider"></div>

    <div class="profile-menu__footer">
      <a href=" " (click)="logout()">
        <svg aria-hidden="true" focusable="false" width="17" height="16" viewBox="0 0 17 16" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M7.6875 14.9576C7.6875 15.2062 7.58873 15.4447 7.41291 15.6205C7.2371 15.7963 6.99864 15.8951 6.75 15.8951H1.75C1.50136 15.8951 1.2629 15.7963 1.08709 15.6205C0.911272 15.4447 0.8125 15.2062 0.8125 14.9576V1.20758C0.8125 0.95894 0.911272 0.720483 1.08709 0.544668C1.2629 0.368853 1.50136 0.270081 1.75 0.270081H6.75C6.99864 0.270081 7.2371 0.368853 7.41291 0.544668C7.58873 0.720483 7.6875 0.95894 7.6875 1.20758C7.6875 1.45622 7.58873 1.69468 7.41291 1.87049C7.2371 2.04631 6.99864 2.14508 6.75 2.14508H2.6875V14.0201H6.75C6.99864 14.0201 7.2371 14.1189 7.41291 14.2947C7.58873 14.4705 7.6875 14.7089 7.6875 14.9576ZM16.1633 7.4193L13.0383 4.2943C12.8622 4.11818 12.6233 4.01924 12.3742 4.01924C12.1251 4.01924 11.8863 4.11818 11.7102 4.2943C11.534 4.47042 11.4351 4.70929 11.4351 4.95836C11.4351 5.20743 11.534 5.4463 11.7102 5.62242L13.2344 7.14508H6.75C6.50136 7.14508 6.2629 7.24385 6.08709 7.41967C5.91127 7.59548 5.8125 7.83394 5.8125 8.08258C5.8125 8.33122 5.91127 8.56968 6.08709 8.74549C6.2629 8.92131 6.50136 9.02008 6.75 9.02008H13.2344L11.7094 10.5443C11.5333 10.7204 11.4343 10.9593 11.4343 11.2084C11.4343 11.4574 11.5333 11.6963 11.7094 11.8724C11.8855 12.0485 12.1244 12.1475 12.3734 12.1475C12.6225 12.1475 12.8614 12.0485 13.0375 11.8724L16.1625 8.74742C16.2499 8.66038 16.3194 8.55693 16.3667 8.443C16.4141 8.32907 16.4386 8.20691 16.4386 8.08352C16.4387 7.96014 16.4144 7.83795 16.3672 7.72396C16.3199 7.60998 16.2506 7.50645 16.1633 7.4193Z" />
        </svg>
        <span class="body__large">Cerrar sesión</span>
      </a>
    </div>
  </div>



  <!--  MODAL DE ALERTA PARA INVITADOS -->
  <div id="login-alert-backdrop" (click)="cerrarModalAvisoAcceso()"></div>

  <section id="login-alert-modal" role="dialog" aria-labelledby="login-alert-modal-title" aria-modal="true">
    <div class="modal-content">
      <!-- BOTÓN DE CIERRE EXCLUSIVO -->
      <button id="login-alert-close" type="button" aria-label="Cerrar aviso" (click)="cerrarModalAvisoAcceso()">
        <span aria-hidden="true">×</span>
      </button>

      <div class="modal-body">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
            fill="#FFC107" />
        </svg>
        <p class="heading__large" id="login-alert-modal-title">Acceso Restringido</p>
        <p class="body__medium">
          Para crear una nueva línea de tiempo, debes ser un usuario registrado e iniciar sesión. ¡Es rápido y fácil!
        </p>
      </div>
    </div>
  </section>
</header>